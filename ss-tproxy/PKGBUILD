pkgname=ss-tproxy
pkgver=4.6
pkgrel=1
pkgdesc='Meta package'
arch=(any)
url='https://github.com/FlyInWind1/archlinux-pkgs'
license=('GPL')
depends=(curl iproute ipset perl)
optdepends=(dnsmasq)
source=("git+https://github.com/zfl9/ss-tproxy#tag=v${pkgver}")
sha256sums=('SKIP')

backup=(
    etc/ss-tproxy/ss-tproxy.conf
)

package(){
    _srcdir=$srcdir/ss-tproxy

    _bindir=$pkgdir/usr/bin
    _etcdir=$pkgdir/etc/ss-tproxy
    install -d $_bindir $_etcdir

    install $_srcdir/ss-tproxy $_bindir
    install -m644 $_srcdir/{ss-tproxy.conf,gfwlist*,chnroute*,ignlist*} $_etcdir
}
